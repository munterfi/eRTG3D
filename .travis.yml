language: R
cache: packages

before_install:
  - R -e 'install.packages("devtools")'
  - R -e 'install.packages("covr")'

install:
  - R -e 'devtools::install_deps(dep = TRUE)'

script:
  - R CMD build .
  - R CMD check *tar.gz

after_success:
  - Rscript -e 'covr::codecov()'
